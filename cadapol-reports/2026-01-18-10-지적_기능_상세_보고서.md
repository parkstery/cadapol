# 지적(地籍) 기능 상세 분석 보고서

**작성일**: 2026년 1월 18일  
**프로젝트명**: Cadapol (Advanced Dual Map Viewer)  
**분석 대상**: MapPane.tsx 내 지적 관련 기능  
**관련 파일**: `components/MapPane.tsx` (Lines 1131-1526)

---

## 목차

1. [개요](#1-개요)
2. [기능 명세](#2-기능-명세)
3. [아키텍처 및 데이터 흐름](#3-아키텍처-및-데이터-흐름)
4. [코드 상세 분석](#4-코드-상세-분석)
5. [VWorld API 통합](#5-vworld-api-통합)
6. [좌표계 변환](#6-좌표계-변환)
7. [UI/UX 구현](#7-uiux-구현)
8. [문제점 및 이슈](#8-문제점-및-이슈)
9. [개선 권장사항](#9-개선-권장사항)
10. [결론](#10-결론)

---

## 1. 개요

### 1.1 지적 기능의 목적

지적(地籍) 기능은 **토지의 소유권, 경계, 면적 등 부동산 정보를 조회하고 시각화**하는 GIS 기능입니다. 이 프로젝트에서는 카카오맵을 통해 지적 정보를 조회하고, VWorld API를 활용하여 정확한 지적 경계 폴리곤을 표시합니다.

### 1.2 주요 기능

1. **지적도 오버레이 토글**: 카카오맵의 지적도 레이어 표시/숨김
2. **지적 정보 조회**: 지도 클릭 위치의 지적 정보 조회
3. **PNU 조회**: 필지고유번호(Parcel Number Unique) 조회
4. **경계 폴리곤 표시**: 지적 경계를 폴리곤으로 시각화
5. **정보 창 표시**: 주소, 좌표, PNU 정보를 InfoWindow로 표시

### 1.3 기술 스택

- **지도 API**: Kakao Maps API
- **지적 데이터 API**: VWorld API (국토교통부 공공데이터)
- **좌표계 변환**: proj4 라이브러리
- **좌표계**: EPSG:5179 (한국 좌표계) → EPSG:4326 (WGS84)

---

## 2. 기능 명세

### 2.1 지적도 오버레이 토글

**기능**: 카카오맵의 지적도 레이어를 토글 방식으로 표시/숨김

**구현 위치**: `toggleKakaoCadastral()` (Line 2884-2890)

**동작 방식**:
```typescript
const toggleKakaoCadastral = useCallback(() => {
  if (config.type !== 'kakao' || !mapRef.current) return;
  const isCadastral = kakaoGisRef.current.roadviewLayer;
  if (isCadastral) {
    mapRef.current.removeOverlayMapTypeId(window.kakao.maps.MapTypeId.USE_DISTRICT);
  } else {
    mapRef.current.addOverlayMapTypeId(window.kakao.maps.MapTypeId.USE_DISTRICT);
  }
  kakaoGisRef.current.roadviewLayer = !isCadastral;
}, [config.type]);
```

**특징**:
- 카카오맵 전용 기능
- `USE_DISTRICT` 오버레이 타입 사용
- 토글 상태는 `kakaoGisRef.current.roadviewLayer`에 저장 (변수명이 혼란스러움)

**문제점**:
- ⚠️ `roadviewLayer` 변수명이 로드뷰와 혼동될 수 있음
- ⚠️ 실제로는 지적도 상태를 저장하는 변수

### 2.2 지적 정보 조회 (2단계 프로세스)

**트리거**: 지도 클릭 이벤트 (기본 모드에서만)

**프로세스**:

#### Step 1: 좌표 → PNU 조회
```
사용자 클릭 (위도, 경도)
  ↓
VWorld API 호출 (POINT 필터)
  ↓
PNU (필지고유번호) 획득
  ↓
InfoWindow에 PNU 정보 추가
```

#### Step 2: PNU → 폴리곤 Geometry 조회
```
PNU 획득
  ↓
VWorld API 호출 (PNU 필터, geometry=true)
  ↓
폴리곤 좌표 데이터 획득
  ↓
좌표계 변환 (EPSG:5179 → EPSG:4326)
  ↓
카카오맵 폴리곤으로 그리기
```

---

## 3. 아키텍처 및 데이터 흐름

### 3.1 전체 데이터 흐름도

```
[사용자 클릭]
    ↓
[setupKakaoAddressClick]
    ↓
[clearCadastralGraphics] ← 기존 그래픽 제거
    ↓
[Kakao Geocoder] ← 주소 변환
    ↓
[InfoWindow 생성] ← 주소, 좌표 표시
    ↓
[fetchCadastralInfoStep1] ← Step 1: PNU 조회
    ↓
[VWorld API 호출] (JSONP)
    ↓
[PNU 획득] → InfoWindow 업데이트
    ↓
[fetchGeometryByPNUStep2] ← Step 2: 폴리곤 조회
    ↓
[VWorld API 호출] (JSONP, geometry=true)
    ↓
[Geometry 데이터 획득]
    ↓
[drawParcelPolygon] ← 폴리곤 그리기
    ↓
[좌표계 변환] (proj4)
    ↓
[Kakao Polygon 생성]
    ↓
[지도에 표시]
```

### 3.2 상태 관리

**사용되는 Refs**:
```typescript
kakaoGisRef.current = {
  cadastralMarker?: any;        // 지적 정보 마커 (현재 미사용)
  cadastralPolygon?: any;       // 지적 경계 폴리곤
  cadastralOverlay?: any;       // 지적 정보 InfoWindow
  cadastralClickPos?: any;      // 클릭 위치 (InfoWindow 위치 계산용)
  cadastralPNU?: string;        // PNU 정보
}
```

**플래그**:
```typescript
isCadastralCloseClick: useRef(false)  // 닫기 버튼 클릭 감지
```

---

## 4. 코드 상세 분석

### 4.1 지적 그래픽 정리 함수

**위치**: `clearCadastralGraphics()` (Lines 1131-1144)

```typescript
const clearCadastralGraphics = () => {
  if (kakaoGisRef.current.cadastralMarker) {
    kakaoGisRef.current.cadastralMarker.setMap(null);
    kakaoGisRef.current.cadastralMarker = null;
  }
  if (kakaoGisRef.current.cadastralPolygon) {
    kakaoGisRef.current.cadastralPolygon.setMap(null);
    kakaoGisRef.current.cadastralPolygon = null;
  }
  if (kakaoGisRef.current.cadastralOverlay) {
    kakaoGisRef.current.cadastralOverlay.setMap(null);
    kakaoGisRef.current.cadastralOverlay = null;
  }
};
```

**역할**: 
- 새로운 지적 정보 조회 전 기존 그래픽 요소 제거
- 메모리 누수 방지

**평가**:
- ✅ 명확한 정리 로직
- ⚠️ `cadastralMarker`는 현재 사용되지 않음 (미래 확장용?)

### 4.2 Step 1: PNU 조회

**위치**: `fetchCadastralInfoStep1()` (Lines 1147-1213)

**API 엔드포인트**:
```
https://api.vworld.kr/req/data?
  service=data
  &request=GetFeature
  &data=LP_PA_CBND_BUBUN
  &key={VWORLD_KEY}
  &geomFilter=POINT({lng} {lat})
  &domain={ALLOWED_DOMAIN}
  &crs=EPSG:4326
  &format=json
  &errorFormat=json
  &geometry=false
  &callback={callbackName}
```

**주요 파라미터**:
- `data=LP_PA_CBND_BUBUN`: 지적 경계 데이터셋
- `geomFilter=POINT(lng lat)`: 좌표로 필터링
- `geometry=false`: Step 1에서는 속성만 조회 (PNU)
- `callback`: JSONP 콜백 함수명

**구현 특징**:
1. **JSONP 방식**: CORS 우회를 위해 동적 스크립트 태그 생성
2. **고유 콜백명**: `vworld_step1_${Date.now()}_${Math.random()}`로 충돌 방지
3. **자동 정리**: 콜백 실행 후 전역 객체 및 스크립트 태그 제거

**코드 구조**:
```typescript
const fetchCadastralInfoStep1 = (lng: number, lat: number, currentMap: any) => {
  // 1. API 키 검증
  if (!VWORLD_KEY) {
    console.warn("VWorld API key is missing");
    return;
  }

  // 2. 고유 콜백명 생성
  const callbackName = `vworld_step1_${Date.now()}_${Math.floor(Math.random() * 10000)}`;
  
  // 3. 전역 콜백 함수 등록
  (window as any)[callbackName] = (data: any) => {
    // 콜백 실행 후 정리
    delete (window as any)[callbackName];
    document.getElementById(callbackName)?.remove();

    // 4. 응답 처리
    if (data.response?.status === 'OK' && data.response.result.featureCollection.features.length > 0) {
      const feature = data.response.result.featureCollection.features[0];
      const pnu = feature.properties.pnu;
      
      // 5. PNU 저장 및 InfoWindow 업데이트
      kakaoGisRef.current.cadastralPNU = pnu;
      updateInfoWindowWithPNU(pnu);
      
      // 6. Step 2 호출
      if (pnu) {
        fetchGeometryByPNUStep2(pnu, currentMap);
      }
    }
  };

  // 7. 동적 스크립트 태그 생성 및 추가
  const script = document.createElement('script');
  script.id = callbackName;
  script.src = `https://api.vworld.kr/req/data?...&callback=${callbackName}`;
  script.onerror = () => {
    // 에러 처리
  };
  document.body.appendChild(script);
};
```

**평가**:
- ✅ JSONP 패턴이 올바르게 구현됨
- ✅ 메모리 누수 방지 (콜백 및 스크립트 태그 정리)
- ⚠️ 에러 처리가 부족함 (네트워크 오류, 타임아웃 등)
- ⚠️ 타입 안정성 부족 (`any` 타입 사용)

### 4.3 Step 2: 폴리곤 Geometry 조회

**위치**: `fetchGeometryByPNUStep2()` (Lines 1216-1246)

**API 엔드포인트**:
```
https://api.vworld.kr/req/data?
  service=data
  &request=GetFeature
  &data=LP_PA_CBND_BUBUN
  &key={VWORLD_KEY}
  &attrFilter=pnu:=:{pnu}
  &domain={ALLOWED_DOMAIN}
  &crs=EPSG:4326
  &format=json
  &errorFormat=json
  &geometry=true  ← Step 1과의 차이점
  &callback={callbackName}
```

**주요 차이점**:
- `attrFilter=pnu:=:{pnu}`: PNU로 필터링
- `geometry=true`: Geometry 데이터 포함

**구현**:
```typescript
const fetchGeometryByPNUStep2 = (pnu: string, currentMap: any) => {
  const callbackName = `vworld_step2_${Date.now()}_${Math.floor(Math.random() * 10000)}`;
  
  (window as any)[callbackName] = (data: any) => {
    delete (window as any)[callbackName];
    document.getElementById(callbackName)?.remove();

    if (data.response?.status === 'OK' && data.response.result.featureCollection.features.length > 0) {
      const feature = data.response.result.featureCollection.features[0];
      if (feature.geometry) {
        drawParcelPolygon(feature.geometry, currentMap);
      }
    }
  };

  const script = document.createElement('script');
  script.id = callbackName;
  script.src = `https://api.vworld.kr/req/data?...&attrFilter=pnu:=:${pnu}&geometry=true&callback=${callbackName}`;
  script.onerror = () => {
    console.error("Step2: Script load error");
    delete (window as any)[callbackName];
    document.getElementById(callbackName)?.remove();
  };
  document.body.appendChild(script);
};
```

**평가**:
- ✅ Step 1과 동일한 패턴으로 일관성 유지
- ⚠️ 에러 처리 부족

### 4.4 폴리곤 그리기

**위치**: `drawParcelPolygon()` (Lines 1249-1355)

**주요 기능**:
1. Geometry 파싱 (Polygon, MultiPolygon 지원)
2. 좌표계 감지 및 변환
3. 카카오맵 Polygon 생성
4. InfoWindow 위치 조정

**좌표계 감지 로직**:
```typescript
const firstPoint = outerRing[0];
let isTM = firstPoint[0] > 180 || firstPoint[1] > 90; // EPSG:5179 감지
```

**평가**:
- ✅ 간단하고 효과적인 감지 방법
- ⚠️ 경계값(180, 90)이 하드코딩됨
- ⚠️ 일부 경계 케이스에서 오작동 가능

**좌표계 변환**:
```typescript
if (isTM) {
  proj4.defs("EPSG:5179", "+proj=tmerc +lat_0=38 +lon_0=127.5 +k=0.9996 +x_0=1000000 +y_0=2000000 +ellps=GRS80 +units=m +no_defs");
  const proj = proj4("EPSG:5179", "EPSG:4326");
  return outerRing.map((coord: number[]) => {
    const [lon, lat] = proj.forward([coord[0], coord[1]]);
    return new kakao.maps.LatLng(lat, lon);
  });
} else {
  return outerRing.map((coord: number[]) => 
    new kakao.maps.LatLng(coord[1], coord[0])
  );
}
```

**폴리곤 스타일**:
```typescript
const polygon = new kakao.maps.Polygon({
  path: paths,
  strokeWeight: 3,
  strokeColor: '#f97316',  // Orange-500
  strokeOpacity: 1,
  strokeStyle: 'solid',
  fillColor: '#f97316',
  fillOpacity: 0.2
});
```

**InfoWindow 위치 조정**:
```typescript
// 줌 레벨에 따른 위도 오프셋 계산 (10px를 위도로 변환)
const baseOffset = 0.0001; // 기본 오프셋 (약 11m)
const zoomFactor = Math.pow(2, Math.max(0, zoomLevel - 3));
const latOffset = baseOffset / zoomFactor;
const infoWindowLat = clickLat + latOffset;
```

**평가**:
- ✅ 줌 레벨에 따른 동적 위치 조정
- ⚠️ 계산식이 복잡하고 주석이 길어 가독성 저하
- ⚠️ 매직 넘버 사용 (0.0001, 3 등)

### 4.5 지도 클릭 이벤트 설정

**위치**: `setupKakaoAddressClick()` (Lines 1358-1526)

**주요 기능**:
1. 지도 클릭 이벤트 리스너 등록
2. 주소 변환 (Kakao Geocoder)
3. InfoWindow 생성 및 표시
4. 지적 정보 조회 트리거

**이벤트 처리 흐름**:
```typescript
const onMapClick = (e: any) => {
  // 1. 모드 체크
  if (gisMode !== GISMode.DEFAULT) return;
  
  // 2. 닫기 버튼 클릭 체크
  if (isCadastralCloseClick.current) {
    isCadastralCloseClick.current = false;
    return;
  }

  const pos = e.latLng;
  
  // 3. 기존 그래픽 제거
  clearCadastralGraphics();
  
  // 4. 클릭 위치 저장
  kakaoGisRef.current.cadastralClickPos = pos;

  // 5. 주소 변환
  kakaoGisRef.current.geocoder.coord2Address(pos.getLng(), pos.getLat(), (result, status) => {
    if (status === window.kakao.maps.services.Status.OK) {
      // 6. InfoWindow 생성
      createInfoWindow(result, pos);
    }
  });

  // 7. 지적 정보 조회
  fetchCadastralInfoStep1(pos.getLng(), pos.getLat(), currentMap);
};
```

**InfoWindow 디자인**:
- 말풍선 스타일
- 반투명 배경 (backdrop-filter: blur)
- 애니메이션 효과 (fadeIn)
- 닫기 버튼 포함

**평가**:
- ✅ 사용자 경험이 좋음 (애니메이션, 디자인)
- ⚠️ 코드가 매우 길어 가독성 저하 (Lines 1358-1526)
- ⚠️ HTML 문자열을 직접 생성하여 유지보수 어려움

---

## 5. VWorld API 통합

### 5.1 API 설정

**API 키**:
```typescript
const VWORLD_KEY = '04FADF88-BBB0-3A72-8404-479547569E44';
```

**도메인 제한**:
```typescript
const ALLOWED_DOMAIN = 'https://cadapol.vercel.app/';
```

**문제점**:
- 🔴 **API 키가 하드코딩됨** - 보안 위험
- ⚠️ 도메인 제한으로 인한 배포 환경 제약

### 5.2 API 엔드포인트

**데이터셋**: `LP_PA_CBND_BUBUN` (지적 경계 데이터)

**Step 1 요청**:
- **목적**: 좌표로 PNU 조회
- **필터**: `geomFilter=POINT(lng lat)`
- **Geometry**: `false` (속성만)

**Step 2 요청**:
- **목적**: PNU로 폴리곤 Geometry 조회
- **필터**: `attrFilter=pnu:=:{pnu}`
- **Geometry**: `true` (좌표 포함)

### 5.3 JSONP 패턴

**이유**: CORS 제한을 우회하기 위해 JSONP 사용

**구현 패턴**:
1. 고유 콜백 함수명 생성
2. 전역 객체에 콜백 등록
3. 동적 스크립트 태그 생성
4. API 호출
5. 콜백 실행
6. 정리 (콜백 제거, 스크립트 태그 제거)

**장점**:
- ✅ CORS 문제 없음
- ✅ 간단한 구현

**단점**:
- ⚠️ 보안 취약점 (XSS 위험)
- ⚠️ 에러 처리 어려움
- ⚠️ 타임아웃 처리 불가

---

## 6. 좌표계 변환

### 6.1 사용되는 좌표계

**EPSG:5179** (한국 좌표계)
- 투영: Transverse Mercator
- 기준점: 위도 38°N, 경도 127.5°E
- 단위: 미터
- 범위: X > 1000000, Y > 2000000

**EPSG:4326** (WGS84)
- 지리 좌표계
- 위도/경도 (도 단위)
- 웹 표준 좌표계

### 6.2 변환 라이브러리

**proj4**:
```typescript
import proj4 from 'proj4';
```

**변환 정의**:
```typescript
proj4.defs("EPSG:5179", "+proj=tmerc +lat_0=38 +lon_0=127.5 +k=0.9996 +x_0=1000000 +y_0=2000000 +ellps=GRS80 +units=m +no_defs");
```

**변환 실행**:
```typescript
const proj = proj4("EPSG:5179", "EPSG:4326");
const [lon, lat] = proj.forward([x, y]);
```

### 6.3 좌표계 감지

**현재 방법**:
```typescript
let isTM = firstPoint[0] > 180 || firstPoint[1] > 90;
```

**평가**:
- ✅ 간단하고 빠름
- ⚠️ 경계 케이스에서 오작동 가능
- ⚠️ 하드코딩된 값

**개선 제안**:
```typescript
// 좌표 범위로 더 정확하게 감지
const isTM = (x: number, y: number) => {
  return x > 100000 && x < 2000000 && y > 100000 && y < 3000000;
};
```

---

## 7. UI/UX 구현

### 7.1 InfoWindow 디자인

**스타일 특징**:
- 반투명 배경 (rgba(255, 255, 255, 0.95))
- 블러 효과 (backdrop-filter: blur(8px))
- 둥근 모서리 (border-radius: 12px)
- 그림자 효과 (box-shadow)
- 애니메이션 (fadeIn)

**정보 표시**:
1. **주소**: 도로명 주소 또는 지번 주소
2. **좌표**: X(경도), Y(위도)
3. **PNU**: 필지고유번호 (Step 1 완료 후 추가)

**닫기 버튼**:
- 원형 버튼
- 호버 효과
- 클릭 시 InfoWindow 제거

### 7.2 폴리곤 스타일

**색상**: Orange-500 (#f97316)
- **테두리**: 불투명 (opacity: 1)
- **채우기**: 반투명 (opacity: 0.2)
- **두께**: 3px

**평가**:
- ✅ 시각적으로 명확함
- ⚠️ 색상이 하드코딩됨 (테마 지원 어려움)

### 7.3 사용자 인터랙션

**클릭 이벤트**:
- 기본 모드에서만 작동
- GIS 도구 모드에서는 비활성화

**닫기 버튼**:
- 클릭 시 지도 클릭 이벤트 무시
- `isCadastralCloseClick` 플래그 사용

**평가**:
- ✅ 사용자 경험이 좋음
- ⚠️ 플래그 관리가 복잡함

---

## 8. 문제점 및 이슈

### 8.1 보안 문제

**🔴 심각**: API 키 하드코딩
```typescript
const VWORLD_KEY = '04FADF88-BBB0-3A72-8404-479547569E44';
```

**위험도**: 높음
- API 키가 소스 코드에 노출
- Git에 커밋될 경우 공개됨
- 무단 사용 가능

**해결 방안**:
```typescript
// .env.local
VITE_VWORLD_API_KEY=...

// 코드
const VWORLD_KEY = import.meta.env.VITE_VWORLD_API_KEY;
```

### 8.2 에러 처리 부족

**문제**:
- 네트워크 오류 처리 없음
- 타임아웃 처리 없음
- API 응답 오류 처리 부족
- 사용자 피드백 없음

**개선 제안**:
```typescript
// 타임아웃 추가
const timeout = setTimeout(() => {
  console.error("API timeout");
  delete (window as any)[callbackName];
  document.getElementById(callbackName)?.remove();
  // 사용자에게 알림 표시
}, 10000); // 10초

// 에러 처리 강화
script.onerror = () => {
  console.error("API request failed");
  // 사용자에게 알림 표시
  delete (window as any)[callbackName];
  document.getElementById(callbackName)?.remove();
};
```

### 8.3 타입 안정성 부족

**문제**:
- `any` 타입 사용
- API 응답 타입 정의 없음

**개선 제안**:
```typescript
interface VWorldResponse {
  response: {
    status: 'OK' | 'ERROR';
    result?: {
      featureCollection: {
        features: Array<{
          properties: {
            pnu: string;
            // ...
          };
          geometry?: {
            type: 'Polygon' | 'MultiPolygon';
            coordinates: number[][][];
          };
        }>;
      };
    };
  };
}
```

### 8.4 코드 가독성

**문제**:
- `setupKakaoAddressClick()` 함수가 168 lines
- HTML 문자열 직접 생성
- 복잡한 계산식

**개선 제안**:
- 컴포넌트 분리
- 템플릿 리터럴 대신 JSX 사용
- 상수 분리

### 8.5 변수명 혼란

**문제**:
```typescript
kakaoGisRef.current.roadviewLayer  // 실제로는 지적도 상태
```

**개선 제안**:
```typescript
kakaoGisRef.current.isCadastralOverlayActive
```

### 8.6 메모리 관리

**문제**:
- JSONP 콜백이 누적될 수 있음
- 스크립트 태그가 제대로 정리되지 않을 수 있음

**개선 제안**:
- 요청 취소 메커니즘 추가
- 컴포넌트 언마운트 시 정리

---

## 9. 개선 권장사항

### 9.1 즉시 개선 필요 (High Priority)

1. **API 키 보안**
   - 환경 변수로 이동
   - `.gitignore` 확인

2. **에러 처리 강화**
   - 네트워크 오류 처리
   - 타임아웃 처리
   - 사용자 피드백

3. **타입 안정성**
   - API 응답 타입 정의
   - `any` 타입 제거

### 9.2 중기 개선 (Medium Priority)

1. **코드 구조 개선**
   - 함수 분리
   - 컴포넌트 분리
   - 상수 분리

2. **JSONP → Fetch API 전환**
   - CORS 프록시 사용
   - 또는 서버 사이드 프록시

3. **변수명 개선**
   - `roadviewLayer` → `isCadastralOverlayActive`

### 9.3 장기 개선 (Low Priority)

1. **캐싱 메커니즘**
   - PNU 조회 결과 캐싱
   - 폴리곤 데이터 캐싱

2. **성능 최적화**
   - 디바운싱
   - 요청 취소

3. **테스트 코드**
   - 단위 테스트
   - 통합 테스트

---

## 10. 결론

### 10.1 기능 평가

**강점**:
- ✅ 2단계 프로세스로 효율적인 데이터 조회
- ✅ 좌표계 변환이 정확하게 구현됨
- ✅ UI/UX가 사용자 친화적
- ✅ 폴리곤 시각화가 명확함

**약점**:
- ⚠️ 보안 문제 (API 키 하드코딩)
- ⚠️ 에러 처리 부족
- ⚠️ 코드 가독성 저하
- ⚠️ 타입 안정성 부족

### 10.2 종합 평가

| 항목 | 점수 | 평가 |
|------|------|------|
| 기능 완성도 | 8/10 | 우수 |
| 코드 품질 | 5/10 | 개선 필요 |
| 보안 | 3/10 | 개선 필요 |
| 에러 처리 | 4/10 | 개선 필요 |
| 사용자 경험 | 8/10 | 우수 |
| **종합** | **5.6/10** | **개선 필요** |

### 10.3 우선순위별 개선 계획

**Phase 1 (즉시)**:
1. API 키 환경 변수로 이동
2. 기본 에러 처리 추가

**Phase 2 (1주일 내)**:
1. 타입 정의 추가
2. 에러 처리 강화
3. 변수명 개선

**Phase 3 (1개월 내)**:
1. 코드 리팩토링
2. 컴포넌트 분리
3. 테스트 코드 작성

---

**보고서 작성자**: AI 코드 분석 시스템  
**최종 수정일**: 2026년 1월 18일  
**다음 리뷰 예정일**: 개선 작업 완료 후
