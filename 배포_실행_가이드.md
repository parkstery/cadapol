# Vercel 배포 실행 가이드

## 현재 상황
- VWorld API는 `https://cadapol.vercel.app/` 도메인에만 허용되어 있습니다.
- `localhost:3000`에서는 지적 경계 폴리곤 기능이 작동하지 않습니다.
- Vercel에 배포하여 테스트해야 합니다.

## 배포 방법 선택

### 방법 1: Vercel CLI 사용 (빠른 배포)

#### 1단계: Vercel CLI 설치
```bash
npm install -g vercel
```

#### 2단계: 로그인
```bash
vercel login
```
브라우저가 열리면 Vercel 계정으로 로그인하세요.

#### 3단계: 배포
프로젝트 루트 디렉토리에서:
```bash
vercel
```

질문이 나오면:
- Set up and deploy? **Y**
- Which scope? (기본값 선택)
- Link to existing project? **N** (새 프로젝트)
- What's your project's name? **cadapol** (또는 원하는 이름)
- In which directory is your code located? **./** (기본값)
- Want to override the settings? **N** (기본값)

#### 4단계: 프로덕션 배포
```bash
vercel --prod
```

이제 `https://cadapol.vercel.app` (또는 할당된 도메인)에서 접속 가능합니다.

---

### 방법 2: GitHub 연동 (자동 배포, 권장)

#### 1단계: Git 초기화 (아직 안 했다면)
```bash
git init
git add .
git commit -m "Prepare for Vercel deployment"
```

#### 2단계: GitHub에 푸시
```bash
# GitHub 저장소 생성 후
git remote add origin <your-github-repo-url>
git branch -M main
git push -u origin main
```

#### 3단계: Vercel 대시보드에서 배포
1. [Vercel Dashboard](https://vercel.com/dashboard) 접속
2. "Add New..." → "Project" 클릭
3. GitHub 저장소 선택
4. 프로젝트 설정:
   - **Framework Preset**: Vite
   - **Root Directory**: `./`
   - **Build Command**: `npm run build`
   - **Output Directory**: `dist`
5. "Deploy" 클릭

#### 4단계: 도메인 설정
- 프로젝트 이름을 `cadapol`로 설정하면 `https://cadapol.vercel.app` 도메인 사용 가능
- 또는 Settings → Domains에서 기존 도메인 연결

---

## 배포 후 확인 사항

1. **배포 URL 접속**
   - `https://cadapol.vercel.app` (또는 할당된 도메인)

2. **브라우저 콘솔 확인**
   - 개발자 도구(F12) → Console 탭
   - 지도를 클릭했을 때:
     - ✅ "Step1: PNU retrieved [PNU값]" (에러 없이)
     - ✅ "Step2: Geometry retrieved Polygon"
     - ✅ "Cadastral polygon drawn successfully [점 개수] points"
   - ❌ "INCORRECT_KEY" 에러가 없어야 함

3. **지적 경계 폴리곤 확인**
   - 지도를 클릭하면 오렌지색 폴리곤이 표시되어야 함
   - 마커와 인포윈도우도 함께 표시되어야 함

## 문제 해결

### 배포 실패 시
```bash
# 로컬에서 빌드 테스트
npm run build
```

### 도메인이 다를 경우
`components/MapPane.tsx`의 `ALLOWED_DOMAIN`을 배포된 도메인으로 변경:
```typescript
const ALLOWED_DOMAIN = 'https://your-project.vercel.app/';
```

### API 에러 지속 시
1. Vercel 배포 URL 확인
2. VWorld API Key가 해당 도메인에 등록되어 있는지 확인
3. 브라우저 콘솔의 네트워크 탭에서 API 요청 확인

## 다음 단계

배포가 완료되면:
1. 배포된 URL에서 테스트
2. 지적 경계 폴리곤이 정상적으로 표시되는지 확인
3. 모든 기능이 정상 작동하는지 검증
